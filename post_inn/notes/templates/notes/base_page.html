<!doctype html>
{% load static %}
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="{% static 'notes/css/style1.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'notes/css/forms-style.css' %}">
    <title>{% if title_page %} {{ title_page }} {% else %} My notes {% endif %}</title>
</head>

<body class="d-flex flex-column h-100">
    <nav class="navbar fixed-top">
        <div class="container-fluid position-relative">
            <div class="position-absolute start-0 px-3">
                <button class="btn btn-navbar" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
                    <i class="bi bi-sliders"></i>
                </button>
            </div>
            <div class="position-absolute start-50 translate-middle-x">
                <h1 class="text-center header">{% if title_page %} {{ title_page }} {% else %} My notes {% endif %}</h1>
            </div>
            <div class="position-absolute end-0 px-3">
                <div class="nav-search-form">
                    <form class="search-form-top" action="/search/" method="get">
                        <div class="input-group">
                            <input class="form-control search" name="q" type="text" aria-describedby="btn-search" placeholder="Поиск...">
                            <button class="btn btn-navbar" type="submit" id="btn-search"><i
                                    class="bi bi-search"></i></button>
                        </div>
                    </form>
                </div>
                <div class="nav-addnote">
                    <a href="{% url 'notesapp:post_create' %}" title="Создать заметку">
                        <div class="addnote-top">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-plus-fill" viewBox="0 0 16 16">
                                <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM8.5 7v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 1 0z"/>
                              </svg>
                            <!-- <span class="star"></span> -->
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </nav>
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar" data-bs-scroll="true" aria-labelledby="offcanvasNavbarLabel">
        <div class="offcanvas-header">
            {% if user.is_authenticated %}
            <a href="{% url 'authapp:edit' %}" class="offcanvas-header--link">
                <h5 class="offcanvas-title" id="offcanvasNavbarLabel">
                    {% if user.name and not user.last_name %}
                    {{ user.name }}
                    {% elif not user.name and user.last_name %}
                    {{ user.last_name }}
                    {% elif user.name and user.last_name %}
                    {{ user.name }}
                    {{ user.last_name|slice:1 }}.
                    {% else %}
                    {{ user.email }}
                {% endif %}
                </h5>
            </a>
            {% else %}
            Hello!
            {% endif %}
            <button class="btn close-offcanvas" type="button" data-bs-dismiss="offcanvas"><i
                    class="bi bi-x-lg"></i></button>
        </div>
        <div class="offcanvas-body">
            <div class="offcanvas-search">
                <div class="position-relative offcanvas-search-form px-3 py-3">
                    <form class="search-form-top" action="/search/" method="get">
                        <div class="input-group">
                            <input class="form-control search" name="q" type="text" aria-describedby="btn-search" placeholder="Поиск...">
                            <button class="btn btn-navbar" type="submit" id="btn-search"><i class="bi bi-search"></i></button>
                        </div>
                    </form>
                </div>
            </div>
            {% if user.is_authenticated %}
            <ul class="list-group">
                <li class="list-group-item">
                    <div class="list-group-item--div">
                        <a class="d-flex justify-content-between" href="{% url 'notesapp:index' %}">
                            <div class="icanvas"><i class="bi bi-house-door"></i> Главная</div>
                        </a>
                    </div>
                </li>
                <li class="list-group-item">
                    <div class="list-group-item--div">
                        <a class="d-flex justify-content-between" href="{% url 'notesapp:post_create' %}">
                            <div class="icanvas"><i class="bi bi-file-earmark-plus"></i> Создать заметку
                            </div>
                        </a>
                    </div>
                </li>
                <li class="list-group-item active">
                    <div class="list-group-item--div">
                        <a class="d-flex justify-content-between" href="{% url 'notesapp:notes_list' %}">
                            <div class="icanvas"><i class="bi bi-list-ul"></i> Мои заметки</div>
                            {% if count_is_active %}
                            <span class="badge rounded-pill bg-success">{{ count_is_active }}</span>
                            {% endif %}
                        </a>
                    </div>
                </li>
                <li class="list-group-item">
                    <div class="list-group-item--div">
                        <a class="d-flex justify-content-between" href="{% url 'notesapp:posts_favorites' %}">
                            <div class="icanvas"><i class="bi bi-star"></i> Избранное</div>
                            {% if count_is_favorites %}
                            <span class="badge rounded-pill bg-warning text-dark">{{ count_is_favorites }}</span>
                            {% endif %}
                        </a>
                    </div>
                </li>
                <li class="list-group-item">
                    <div class="list-group-item--div">
                        <a class="d-flex justify-content-between" href="{% url 'notesapp:posts_basket_list' %}">
                            <div class="icanvas"><i class="bi bi-basket2"></i> Корзина</div>
                            {% if count_is_basket %}
                            <span class="badge rounded-pill bg-secondary">{{ count_is_basket }}</span>
                            {% endif %}
                        </a>
                    </div>
                </li>
            </ul>
            <hr>
            <ul class="list-group">
                <li class="list-group-item">
                    <div class="list-group-item--div">
                        <a class="d-flex justify-content-between" href="{% url 'fordevapp:list' %}">
                            <div class="icanvas"><i class="bi bi-person-workspace"></i> Для разработчиков
                            </div>
                        </a>
                    </div>
                </li>
                <li class="list-group-item">
                    <div class="list-group-item--div">
                        <a class="d-flex justify-content-between" href="{% url 'auth:logout' %}">
                            <div class="icanvas"><i class="bi bi-box-arrow-left">
                                </i> Выйти</div>
                        </a>
                    </div>
                </li>
                <li class="list-group-item">
            </ul>
            {% endif %}
        </div>
    </div>

    <!-- Begin page content -->
    <main class="flex-shrink-0 min-vh-100 position-relative py-5">
        <div class="container">
            {% include 'notes/includes/first_post_inc.html' %}
            {% block content %}
            {% endblock %}
        </div>

        <a href="{% url 'notesapp:post_create' %}" title="Создать заметку">
            <div class="addnote">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-plus-fill" viewBox="0 0 16 16">
                    <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM8.5 7v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 1 0z"/>
                  </svg>
                <!-- <span class="star"></span> -->
            </div>
        </a>
        {% if page_obj.has_other_pages %}
        {% include 'notes/includes/pagination_inc.html' %}
        {% endif %}
        {% if messages %}
        {% include 'notes/includes/toasts1_inc.html' %}
        {% endif %}
    </main>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
</body>

</html>